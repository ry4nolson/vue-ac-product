(function(){function t(e,r,o,s){return new Promise(function(u,n){var p;"single"==e?p="/api/v1/products/"+r+"?expand=pictures&"+o:"multiple"==e?p="/api/v1/products?id="+r+"&expand=pictures&"+o:"category"==e?p="/api/v1/categories/"+r+"/products?"+o:"status"==e&&(p="/api/v1/product_statuses/"+r);var i=new XMLHttpRequest;i.open("GET","https://"+VUE_AC_SECURE_DOMAIN+p,!0),i.setRequestHeader("x-ac-auth-token",VUE_AC_API_KEY),i.onreadystatechange=function(){if(4==i.readyState&&200==i.status)if(s&&s(i.responseText),"category"==e){var r=JSON.parse(i.responseText).products;t("multiple",r.map(function(t){return t.id}).join("+OR+"),o,u)}else u(i.responseText)},i.send(null)})}function e(t){for(var e,r,o=t.length;o;)r=Math.floor(Math.random()*o--),e=t[o],t[o]=t[r],t[r]=e;return t}Vue.component("vue-ac-product",{props:["mode","product-id","product-ids","category-id","filter","random"],methods:{primaryPhoto:function(t){var e=t||this.product;if(e){if(e.pictures){var r=e.pictures.filter(function(t){return t.is_primary});if(r)return r[0].image_file}return""}},productStatus:function(t){return""}},data:function(){var r,o=this,s=o._props.mode||"single",u=o._props.filter||"";switch(s){case"category":r=o._props.categoryId;break;case"multiple":r=o._props.productIds.split(",").join("+OR+");break;case"single":default:r=o._props.productId}return t(s,r,u).then(function(t){"single"==s?o.product=JSON.parse(t):"multiple"!=s&&"category"!=s||(o.products=JSON.parse(t).products,o._props.random&&(o.products=e(o.products))),o.$el.setAttribute&&o.$el.setAttribute("style","")}),"single"==s?{product:{}}:{products:[]}}}),window.EXISTING_VUE_APP&&EXISTING_VUE_APP||document.querySelectorAll(VUE_ROOT).forEach(function(t){new Vue({el:t})})})();